<div class="card table-list-card">
  <div class="card-body">
    <div class="table-top">
      <div class="search-set">
        <div class="input">
          <label for="role">Select Role:</label>
          <select class="form-select" id="role" (change)="onRoleChange($any($event.target).value)">
            <option [value]="null" disabled selected>Choose a role</option>
            <option *ngFor="let role of roles" [value]="role">{{ role.role }}</option>
          </select>
        </div>
      </div>
    </div>
    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>Module</th>
            <th>Permission</th>
            <th>View</th>
            <th>Create</th>
            <th>Edit</th>
            <th>Delete</th>
            <th>Allow all</th>
          </tr>
        </thead>
        <tbody *ngIf="selectedRole">
          <tr *ngFor="let module of getModulesFromRole(selectedRole)">
            <td>{{ module.tableName }}</td>
            <td>{{ module.authorityName }}</td>
            <td>
              <label class="checkboxs">
                <input type="checkbox" [checked]="isPermissionSelected(module, 'READ')" (change)="onPermissionChange(module, 'READ', $event)">
                <span class="checkmarks"></span>
              </label>
            </td>
            <td>
              <label class="checkboxs">
                <input type="checkbox" [checked]="isPermissionSelected(module, 'CREATE')" (change)="onPermissionChange(module, 'CREATE', $event)">
                <span class="checkmarks"></span>
              </label>
            </td>
            <td>
              <label class="checkboxs">
                <input type="checkbox" [checked]="isPermissionSelected(module, 'UPDATE')" (change)="onPermissionChange(module, 'UPDATE', $event)">
                <span class="checkmarks"></span>
              </label>
            </td>
            <td>
              <label class="checkboxs">
                <input type="checkbox" [checked]="isPermissionSelected(module, 'DELETE')" (change)="onPermissionChange(module, 'DELETE', $event)">
                <span class="checkmarks"></span>
              </label>
            </td>
            <td>
              <label class="checkboxs">
                <input type="checkbox" [checked]="isAllPermissionsSelected(module)" (change)="onAllowAllChange(module, $event)">
                <span class="checkmarks"></span>
              </label>
            </td>
          </tr>
        </tbody>
      </table>
      <button (click)="savePermissions()">Save</button>
    </div>
  </div>
</div>
