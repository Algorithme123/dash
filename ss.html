selectedRole: any = null;
roles = [...]; // Liste de tous les rôles
permissions: any[] = []; // Liste des permissions de l'utilisateur
modules: any[] = []; // Liste des modules

onRoleChange(role: any) {
  this.selectedRole = role;
  this.modules = this.getModulesFromRole(role);
}

getModulesFromRole(role: any) {
  // Retourne les modules (tableName) uniques pour le rôle sélectionné
  const modulesMap = {};
  role.roleAuthorities.forEach((permission: any) => {
    const module = permission.tableName;
    if (!modulesMap[module]) {
      modulesMap[module] = { name: module, permissions: [] };
    }
    modulesMap[module].permissions.push(permission.authorityName);
  });
  return Object.values(modulesMap);
}

isPermissionSelected(module: any, permission: string): boolean {
  return module.permissions.includes(permission);
}

onPermissionChange(permissionId: number, event: any) {
  const isChecked = event.target.checked;
  // Logique pour ajouter ou retirer la permission
}

isAllPermissionsSelected(module: any): boolean {
  const requiredPermissions = ['READ', 'CREATE', 'UPDATE', 'DELETE'];
  return requiredPermissions.every(permission => this.isPermissionSelected(module, permission));
}

onAllowAllChange(module: any, event: any) {
  const isChecked = event.target.checked;
  // Logique pour cocher ou décocher toutes les permissions pour le module
}

savePermissions() {
  // Logique pour sauvegarder les permissions
}
